<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Order/Menu ‚Ä¢ La Madre Coffee & Roastery</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0c10;
      --bg2:#0f121a;
      --text:#eef2f7;
      --muted:#aab3c2;
      --line:rgba(255,255,255,.10);
      --card:rgba(255,255,255,.06);
      --glass:rgba(0,0,0,.25);
      --accent:#d7b56f;
      --accent2:#7bd7c9;
      --shadow: 0 26px 90px rgba(0,0,0,.50);
      --r:22px;
    }
    [data-theme="light"]{
      --bg:#f6f7fb;
      --bg2:#ffffff;
      --text:#151a24;
      --muted:#5d6778;
      --line:rgba(0,0,0,.10);
      --card:rgba(0,0,0,.04);
      --glass:rgba(255,255,255,.65);
      --shadow: 0 18px 70px rgba(16,20,30,.12);
    }

    *{box-sizing:border-box}
    html,body{
      margin:0;padding:0;
      font-family:"Plus Jakarta Sans",system-ui,Segoe UI,Arial,sans-serif;
      background:linear-gradient(180deg,var(--bg),var(--bg2));
      color:var(--text);
    }
    a{color:inherit;text-decoration:none}
    button{font-family:inherit}

    .wrap{
      width:100%;
      max-width:1120px;
      margin:0 auto;
      padding:0 18px;
    }
    @media (min-width: 1200px){
      .wrap{ max-width: 1280px; padding: 0 24px; }
    }
    @media (min-width: 1500px){
      .wrap{ max-width: 1400px; }
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.12'/%3E%3C/svg%3E");
      opacity:.06;
      z-index:-1;
    }
    [data-theme="light"] body::before{opacity:.035;}

    /* ===== NAV ===== */
    .nav{
      position:sticky;top:0;z-index:50;
      border-bottom:1px solid var(--line);
      backdrop-filter: blur(12px);
      background:linear-gradient(to bottom, rgba(10,12,18,.82), rgba(10,12,18,.30));
    }
    [data-theme="light"] .nav{
      background:linear-gradient(to bottom, rgba(255,255,255,.88), rgba(255,255,255,.56));
    }
    .navin{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 0}
    .brand{display:flex;gap:12px;align-items:center;min-width:0}
    .brandTxt{min-width:0}
    .logoImg{
      width:46px;height:46px;
      border-radius:18px;
      object-fit:cover;
      border:1px solid var(--line);
      box-shadow:0 18px 45px rgba(215,181,111,.18);
      flex:0 0 46px;
      background:#000;
    }
    .brand h1{
      margin:0;
      font-size:16px;
      line-height:1.12;
      letter-spacing:-.02em;
      font-weight:900;
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      text-transform:uppercase;
    }
    .brand p{
      margin:2px 0 0 0;color:var(--muted);
      font-size:12px;
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis
    }
    .right{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .btn{
      padding:10px 14px;border-radius:14px;
      border:1px solid var(--line);
      background:var(--card);
      color:var(--text);
      font-weight:800;font-size:13px;
      cursor:pointer;
      transition:.18s ease;
      user-select:none;
      display:inline-flex;align-items:center;gap:8px;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn.primary{
      border-color:rgba(215,181,111,.55);
      background:linear-gradient(135deg, rgba(215,181,111,.98), rgba(123,215,201,.55));
      color:#0b0c10;
      box-shadow:0 16px 40px rgba(215,181,111,.18);
    }
    .btn.danger{
      border-color:rgba(255,90,90,.35);
      background:rgba(255,90,90,.08);
      color:var(--text);
    }
    .btn:active{transform:translateY(0px) scale(.98)}
    .desktopOnly{display:flex}

    .hamb{
      display:none;
      width:44px;height:44px;
      border-radius:16px;
      border:1px solid var(--line);
      background:var(--card);
      color:var(--text);
      cursor:pointer;
      font-weight:900;
      font-size:18px;
      transition:.18s ease;
    }
    .hamb:hover{transform:translateY(-1px)}
    .hamb:active{transform:translateY(0) scale(.98)}

    .mobileMenu{
      display:none;
      border-top:1px solid var(--line);
      background:linear-gradient(to bottom, rgba(10,12,18,.82), rgba(10,12,18,.50));
      backdrop-filter: blur(12px);
    }
    [data-theme="light"] .mobileMenu{
      background:linear-gradient(to bottom, rgba(255,255,255,.88), rgba(255,255,255,.70));
    }
    .mobileMenu .btn{justify-content:flex-start}
    .mobileMenu .full{
      width:100%;
      border-radius:0;
      border-left:0;border-right:0;
      border-top:0;
      padding:14px 18px;
    }
    @media (max-width: 720px){
      .brand p{display:none;}
      .brand h1{font-size:14px;}
      .desktopOnly{display:none;}
      .hamb{display:inline-flex;align-items:center;justify-content:center;}
      .mobileMenu.open{display:block;}
    }

    /* ===== Page ===== */
    .page{
      padding:18px 0 26px;
      position:relative;
      overflow:hidden;
    }
    .page::before{
      content:"";
      position:absolute;inset:-60px;
      background:
        radial-gradient(900px 520px at 18% 10%, rgba(215,181,111,.16), transparent 60%),
        radial-gradient(900px 520px at 85% 20%, rgba(123,215,201,.12), transparent 60%);
      pointer-events:none;
      opacity:.95;
    }
    .topRow{
      position:relative;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }
    .title{
      margin:0;
      font-size:22px;
      font-weight:900;
      letter-spacing:-.02em;
    }
    .sub{
      margin:6px 0 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
      max-width: 70ch;
    }

    .grid{
      position:relative;
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:14px;
      align-items:start;
    }
    @media(max-width: 980px){
      .grid{grid-template-columns:1fr}
    }

    .panel{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:var(--r);
      padding:14px;
      box-shadow:var(--shadow);
    }
    [data-theme="light"] .panel{box-shadow: 0 18px 70px rgba(16,20,30,.10);}

    /* ===== Filters ===== */
    .filters{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .pill{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      color:var(--muted);
      font-weight:900;
      font-size:12.6px;
      cursor:pointer;
      transition:.18s ease;
      user-select:none;
    }
    [data-theme="light"] .pill{background:rgba(0,0,0,.03);}
    .pill:hover{transform:translateY(-1px); color:var(--text);}
    .pill.active{
      color:#0b0c10;
      background:linear-gradient(135deg, rgba(215,181,111,.98), rgba(123,215,201,.55));
      border-color:rgba(215,181,111,.55);
      box-shadow:0 16px 40px rgba(215,181,111,.14);
    }

    /* ===== Menu list ===== */
    .menuList{
      display:grid;
      gap:10px;
    }
    .item{
      display:grid;
      grid-template-columns: 1fr auto;
      gap:12px;
      padding:12px;
      border-radius:18px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      align-items:center;
      overflow:hidden;
    }
    [data-theme="light"] .item{background:rgba(0,0,0,.03)}
    .itemLeft{min-width:0}
    .itemName{
      margin:0;
      font-weight:900;
      letter-spacing:-.01em;
      font-size:14px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .itemMeta{
      margin-top:6px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      color:var(--muted);
      font-size:12.2px;
      line-height:1.4;
    }
    .tag{
      display:inline-flex;gap:8px;align-items:center;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.12);
    }
    [data-theme="light"] .tag{background:rgba(255,255,255,.75)}
    .dot{width:7px;height:7px;border-radius:99px;background:var(--accent2);box-shadow:0 0 0 4px rgba(123,215,201,.12)}

    .itemRight{
      display:flex;
      align-items:flex-end;
      gap:10px;
    }
    .priceWrap{
      text-align:right;
      min-width:110px;
    }
    .price{
      font-weight:900;
      white-space:nowrap;
    }
    .priceNote{
      margin-top:6px;
      color:var(--muted);
      font-size:11.8px;
      line-height:1.25;
      white-space:nowrap;
    }

    .qtyWrap{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:6px;
    }
    .qty{
      display:inline-flex;
      align-items:center;
      border:1px solid var(--line);
      border-radius:14px;
      overflow:hidden;
      background:rgba(0,0,0,.10);
    }
    [data-theme="light"] .qty{background:rgba(255,255,255,.65)}
    .qbtn{
      width:40px;height:40px;
      border:0;
      background:transparent;
      color:var(--text);
      cursor:pointer;
      font-weight:900;
      font-size:18px;
      transition:.15s ease;
    }
    .qbtn:hover{background:rgba(255,255,255,.06)}
    [data-theme="light"] .qbtn:hover{background:rgba(0,0,0,.05)}
    .qnum{
      width:44px;
      text-align:center;
      font-weight:900;
      color:var(--text);
      font-size:13px;
      user-select:none;
    }
    .qtyNote{
      color:var(--muted);
      font-size:11.8px;
      line-height:1.25;
      text-align:right;
      min-height: 14px;
    }

    /* ===== Cart ===== */
    .cartTop{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .cartTitle{margin:0;font-size:16px;font-weight:900}
    .cartSub{margin:6px 0 0;color:var(--muted);font-size:12.5px;line-height:1.5}
    .cartList{
      display:grid;
      gap:8px;
      margin-top:10px;
    }
    .cRow{
      display:grid;
      grid-template-columns: 1fr auto;
      gap:10px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      align-items:center;
    }
    [data-theme="light"] .cRow{background:rgba(0,0,0,.03)}
    .cRow b{font-size:13px}
    .cRow small{display:block;margin-top:4px;color:var(--muted);font-size:12px}
    .cRight{text-align:right}
    .cRight b{white-space:nowrap}

    .totalBox{
      margin-top:10px;
      border-top:1px solid var(--line);
      padding-top:12px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:10px;
    }
    .totalLeft span{display:block;color:var(--muted);font-size:12.8px}
    .totalLeft b{display:block;font-size:18px;margin-top:4px}
    .totalRight{
      text-align:right;
      color:var(--muted);
      font-size:12.4px;
      line-height:1.45;
    }
    .totalRight b{color:var(--text); font-weight:900}

    .cartNotes{
      margin-top:10px;
      display:grid;
      gap:8px;
      color:var(--muted);
      font-size:12.4px;
      line-height:1.5;
    }
    .noteLine{
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
    }
    [data-theme="light"] .noteLine{background:rgba(0,0,0,.02)}

    .form{
      margin-top:12px;
      display:grid;
      gap:10px;
    }
    .in{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.12);
      color:var(--text);
      outline:none;
      font-weight:700;
    }
    [data-theme="light"] .in{background:rgba(255,255,255,.70); color:var(--text);}
    .in::placeholder{color:rgba(170,179,194,.75)}
    [data-theme="light"] .in::placeholder{color:rgba(93,103,120,.70)}

    /* ===== Payment (klik button, bukan centang) ===== */
    .pay{
      border:1px solid var(--line);
      border-radius:18px;
      padding:12px;
      background:rgba(255,255,255,.03);
      margin-top:12px;
    }
    [data-theme="light"] .pay{background:rgba(0,0,0,.02)}
    .pay b{display:block;font-size:13px;margin-bottom:10px}

    .payGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }

    .payBtn{
      width:100%;
      text-align:left;
      padding:12px 12px;
      border-radius:18px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.10);
      color:var(--text);
      cursor:pointer;
      transition:.18s ease;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    [data-theme="light"] .payBtn{background:rgba(255,255,255,.70)}
    .payBtn:hover{transform:translateY(-1px)}
    .payBtn:active{transform:translateY(0) scale(.99)}
    .payBtn .left{
      display:flex;gap:10px;align-items:flex-start;
      min-width:0;
    }
    .payIcon{
      width:40px;height:40px;border-radius:16px;
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(135deg, rgba(215,181,111,.95), rgba(123,215,201,.45));
      color:#0b0c10;font-weight:900;
      flex:0 0 40px;
    }
    .payTxt{min-width:0}
    .payTxt strong{display:block;font-size:13.5px;letter-spacing:-.01em}
    .payTxt small{display:block;margin-top:4px;color:var(--muted);font-size:12.2px;line-height:1.35}
    .payStat{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      color:var(--muted);
      font-weight:900;
      font-size:12px;
      white-space:nowrap;
      background:rgba(255,255,255,.04);
    }
    [data-theme="light"] .payStat{background:rgba(0,0,0,.03)}

    .payBtn.active{
      color:#0b0c10;
      background:linear-gradient(135deg, rgba(215,181,111,.98), rgba(123,215,201,.55));
      border-color:rgba(215,181,111,.55);
      box-shadow:0 16px 40px rgba(215,181,111,.14);
    }
    .payBtn.active .payStat{
      color:#0b0c10;
      background:rgba(255,255,255,.35);
      border-color:rgba(255,255,255,.45);
    }
    .payBtn.active .payTxt small{color:rgba(11,12,16,.80)}

    .actions{
      margin-top:12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    .hint{
      margin-top:10px;
      color:var(--muted);
      font-size:12.5px;
      line-height:1.6;
    }

    .footer{
      margin-top:18px;
      padding:18px 0 30px;
      border-top:1px solid var(--line);
      color:var(--muted);
      font-size:12.5px;
      text-align:center;
    }

    /* ===== QRIS MODAL (popup tengah) ===== */
    .modalOverlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.55);
      backdrop-filter: blur(8px);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:999;
    }
    .modalOverlay.open{display:flex}

    .modal{
      width:min(560px, 100%);
      border-radius:22px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(20,24,34,.92), rgba(12,14,20,.92));
      box-shadow: 0 40px 160px rgba(0,0,0,.70);
      overflow:hidden;
      position:relative;
    }
    [data-theme="light"] .modal{
      background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(250,250,252,.92));
      box-shadow: 0 28px 120px rgba(16,20,30,.18);
    }

    .modalHead{
      padding:14px 14px 10px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      border-bottom:1px solid var(--line);
    }
    .modalHead b{font-size:14px}
    .modalHead small{display:block;margin-top:6px;color:var(--muted);line-height:1.4}
    .closeBtn{
      width:44px;height:44px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      font-weight:900;
      font-size:18px;
      transition:.18s ease;
    }
    [data-theme="light"] .closeBtn{background:rgba(0,0,0,.04)}
    .closeBtn:hover{transform:translateY(-1px)}
    .closeBtn:active{transform:translateY(0) scale(.98)}

    .modalBody{
      padding:14px;
      display:grid;
      gap:12px;
    }
    .qrisBigWrap{
      border:1px solid var(--line);
      border-radius:18px;
      background:rgba(255,255,255,.04);
      padding:12px;
      display:grid;
      gap:10px;
      justify-items:center;
    }
    [data-theme="light"] .qrisBigWrap{background:rgba(0,0,0,.02)}

    .qrisBig{
      width:min(420px, 100%);
      aspect-ratio: 1 / 1;
      object-fit:contain;
      border-radius:16px;
      border:1px solid var(--line);
      background:#fff;
      display:block;
    }

    .amountBox{
      width:100%;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:10px;
      padding:12px;
      border-radius:16px;
      border:1px dashed var(--line);
    }
    .amountBox span{color:var(--muted);font-size:12px}
    .amountBox b{font-size:18px}
    .paidRow{
      display:flex;
      gap:10px;
      align-items:center;
      padding:12px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.10);
      font-weight:900;
      color:var(--text);
    }
    [data-theme="light"] .paidRow{background:rgba(255,255,255,.70)}
    .paidRow input{accent-color: var(--accent)}

    .modalErr{
      padding:12px;
      border-radius:16px;
      border:1px solid rgba(255,80,80,.35);
      background:rgba(255,80,80,.08);
      color:var(--text);
      display:none;
    }
    .modalErr.show{display:block}
  </style>
</head>

<body>
  <!-- NAV -->
  <div class="nav">
    <div class="wrap navin">
      <div class="brand">
        <img class="logoImg" src="logo-lamadre.png" alt="La Madre Logo">
        <div class="brandTxt">
          <h1>LA MADRE COFFEE &amp; ROASTERY</h1>
          <p>Specialty coffee ‚Ä¢ Comfort food ‚Ä¢ Karawang</p>
        </div>
      </div>

      <!-- Desktop actions -->
      <div class="right desktopOnly">
        <button class="btn" id="themeBtn" type="button">üåì Mode</button>
        <a class="btn" href="index.html">üè† Beranda</a>
        <a class="btn" id="reserveBtn" target="_blank" rel="noreferrer">üìÖ Reservasi</a>
        <a class="btn primary" href="https://wa.me/6281398686801" target="_blank" rel="noreferrer">üí¨ Chat WhatsApp</a>
      </div>

      <!-- Mobile: hamburger -->
      <button class="hamb" id="hambBtn" type="button" aria-label="Buka menu" aria-expanded="false">‚ò∞</button>
    </div>

    <!-- Mobile dropdown menu -->
    <div class="mobileMenu" id="mobileMenu">
      <button class="btn full" id="themeBtnM" type="button">üåì Mode Gelap/Terang</button>
      <a class="btn full" href="index.html">üè† Beranda</a>
      <a class="btn full" id="reserveBtnM" target="_blank" rel="noreferrer">üìÖ Reservasi</a>
      <a class="btn primary full" href="https://wa.me/6281398686801" target="_blank" rel="noreferrer">üí¨ Chat WhatsApp</a>
    </div>
  </div>

  <main class="page">
    <div class="wrap">
      <div class="topRow">
        <div>
          <h2 class="title">Order/Menu</h2>
          <p class="sub">Pilih menu ‚Üí atur jumlah ‚Üí otomatis masuk keranjang. Pilih metode pembayaran cukup klik kartunya.</p>
        </div>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn" id="scrollCart" type="button">üßæ Lihat Pesanan</button>
        </div>
      </div>

      <div class="grid">
        <!-- LEFT: Menu -->
        <section class="panel" aria-label="Daftar menu">
          <div class="filters" id="filters"></div>
          <div class="menuList" id="menuList"></div>
          <p class="hint">Catatan: list menu di bawah masih contoh. Nanti bisa kita isi 100% sesuai PDF menu kamu.</p>
        </section>

        <!-- RIGHT: Cart -->
        <aside class="panel" id="cartPanel" aria-label="Ringkasan pesanan">
          <div class="cartTop">
            <div>
              <h3 class="cartTitle">Pesanan Kamu</h3>
              <p class="cartSub">Ringkasan & total akan muncul otomatis.</p>
            </div>
            <button class="btn danger" id="resetBtn" type="button">üîÑ Reset</button>
          </div>

          <div class="cartList" id="cartList"></div>

          <div class="totalBox">
            <div class="totalLeft">
              <span>Total</span>
              <b id="totalText">Rp 0</b>
            </div>
            <div class="totalRight">
              <div>Jumlah item: <b id="countText">0</b></div>
              <div>Jumlah menu: <b id="distinctText">0</b></div>
            </div>
          </div>

          <div class="cartNotes">
            <div class="noteLine" id="noteLine1">Keterangan: jumlah & total di atas adalah yang <b>masuk keranjang/pesanan</b>.</div>
            <div class="noteLine" id="noteLine2">Jika pilih <b>QRIS</b>, QR akan muncul popup di tengah agar mudah di-scan.</div>
          </div>

          <div class="form">
            <input class="in" id="custName" type="text" placeholder="Nama kamu (wajib)">
            <input class="in" id="custNote" type="text" placeholder="Catatan (opsional) contoh: less sugar / no ice">
          </div>

          <!-- ===== METODE BAYAR: MODEL KLIK ===== -->
          <div class="pay">
            <b>Metode Pembayaran</b>
            <div class="payGrid">
              <button class="payBtn active" id="payKasir" type="button">
                <div class="left">
                  <div class="payIcon">üè∑Ô∏è</div>
                  <div class="payTxt">
                    <strong>Bayar di Kasir</strong>
                    <small>Checkout via WhatsApp, bayar saat datang.</small>
                  </div>
                </div>
                <span class="payStat" id="statKasir">Dipilih</span>
              </button>

              <button class="payBtn" id="payQris" type="button">
                <div class="left">
                  <div class="payIcon">üì∑</div>
                  <div class="payTxt">
                    <strong>QRIS (Popup)</strong>
                    <small>Klik untuk tampilkan QR, lalu centang ‚Äúsudah bayar‚Äù.</small>
                  </div>
                </div>
                <span class="payStat" id="statQris">Pilih</span>
              </button>
            </div>
          </div>

          <div class="actions">
            <button class="btn primary" id="orderBtn" type="button">‚úÖ Buat Pesanan (WhatsApp)</button>
            <button class="btn" id="pdfBtn" type="button">‚¨áÔ∏è Unduh Bukti (PDF)</button>
          </div>

          <p class="hint">
            *PDF akan terdownload ke HP/PC pengunjung. Tidak dikirim otomatis karena web ini belum meminta nomor pembeli.
          </p>

          <!-- hidden state for payment -->
          <input type="hidden" id="payMethod" value="kasir">
        </aside>
      </div>

      <div class="footer">
        ¬© <span id="y"></span> La Madre Coffee &amp; Roastery
      </div>
    </div>
  </main>

  <!-- ===== QRIS MODAL (POPUP) ===== -->
  <div class="modalOverlay" id="qrisModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Pembayaran QRIS">
      <div class="modalHead">
        <div>
          <b>Bayar via QRIS</b>
          <small>Scan QR di bawah, lalu centang ‚ÄúSaya sudah bayar‚Äù.</small>
        </div>
        <button class="closeBtn" id="qrisClose" type="button" aria-label="Tutup">‚úï</button>
      </div>

      <div class="modalBody">
        <div class="qrisBigWrap">
          <img id="qrisImg" class="qrisBig" src="qris.png" alt="QRIS La Madre" loading="lazy">
          <div class="amountBox">
            <span>Total tagihan</span>
            <b id="qrisAmountText">Rp 0</b>
          </div>
        </div>

        <label class="paidRow">
          <input type="checkbox" id="paidCheck">
          Saya sudah bayar via QRIS
        </label>

        <div class="modalErr" id="qrisErr">
          QR tidak bisa ditampilkan. Pastikan file <b>qris.png</b> ada dan 1 folder dengan <b>order.html</b>.
        </div>

        <small style="color:var(--muted);line-height:1.55">
          Setelah bayar, klik <b>Buat Pesanan (WhatsApp)</b>. Admin akan verifikasi pembayaran.
        </small>
      </div>
    </div>
  </div>

  <script>
    // ===== Year
    document.getElementById("y").textContent = new Date().getFullYear();

    // ===== Mobile Menu Toggle
    (function(){
      const hambBtn = document.getElementById("hambBtn");
      const mobileMenu = document.getElementById("mobileMenu");
      if(!hambBtn || !mobileMenu) return;

      hambBtn.addEventListener("click", ()=>{
        const open = mobileMenu.classList.toggle("open");
        hambBtn.setAttribute("aria-expanded", open ? "true" : "false");
        hambBtn.textContent = open ? "‚úï" : "‚ò∞";
      });

      mobileMenu.addEventListener("click", (e)=>{
        if(e.target.tagName === "A"){
          mobileMenu.classList.remove("open");
          hambBtn.setAttribute("aria-expanded","false");
          hambBtn.textContent = "‚ò∞";
        }
      });
    })();

    // ===== Theme (dark/light) sync Desktop & Mobile
    (function(){
      const key = "theme_lamadre";
      const btnD = document.getElementById("themeBtn");
      const btnM = document.getElementById("themeBtnM");

      function applySaved(){
        const saved = localStorage.getItem(key);
        if(saved === "light") document.documentElement.setAttribute("data-theme","light");
        else document.documentElement.removeAttribute("data-theme");
      }
      function toggle(){
        const isLight = document.documentElement.getAttribute("data-theme")==="light";
        if(isLight){
          document.documentElement.removeAttribute("data-theme");
          localStorage.setItem(key,"dark");
        }else{
          document.documentElement.setAttribute("data-theme","light");
          localStorage.setItem(key,"light");
        }
      }
      applySaved();
      if(btnD) btnD.addEventListener("click", toggle);
      if(btnM) btnM.addEventListener("click", toggle);
    })();

    // ===== Reservasi link
    (function(){
      const WA_NUMBER = "6281398686801";
      const msg = "Halo La Madre Coffee & Roastery, saya ingin reservasi. Mohon info ketersediaan tempat ya. Terima kasih.";
      const url = `https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`;
      const d = document.getElementById("reserveBtn");
      const m = document.getElementById("reserveBtnM");
      if(d) d.href = url;
      if(m) m.href = url;
    })();

    // ===== Helpers
    function toIDR(n){
      try{ return "Rp " + (n||0).toLocaleString("id-ID"); }
      catch(e){ return "Rp " + (n||0); }
    }
    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"quot;")
        .replaceAll("'","&#039;");
    }

    // ===== Data menu (contoh)
    const MENU = [
      { id:"espresso", name:"Espresso", price:22000, cat:"Coffee" },
      { id:"americano", name:"Iced Americano", price:28000, cat:"Coffee" },
      { id:"latte", name:"Caffe Latte", price:32000, cat:"Coffee" },
      { id:"butter", name:"Butterscotch Latte", price:38000, cat:"Signature" },
      { id:"hazelnut", name:"Hazelnut Latte", price:38000, cat:"Signature" },
      { id:"matcha", name:"Matcha Latte", price:35000, cat:"Non-Coffee" },
      { id:"strawberry", name:"Strawberry (Non Coffee)", price:32000, cat:"Non-Coffee" },
      { id:"toast", name:"Bread Toast (Mixed)", price:28000, cat:"Snack" },
      { id:"grilled", name:"Grilled Chicken Rice", price:52000, cat:"Main Course" },
      { id:"presto", name:"Presto Chicken Rice", price:52000, cat:"Main Course" },
      { id:"dessert", name:"Dessert of The Day", price:30000, cat:"Dessert" },
    ];

    // ===== State
    const cart = new Map();
    const ALL = "Semua Kategori";
    const categories = [ALL, ...Array.from(new Set(MENU.map(x=>x.cat)))];
    let activeCat = ALL;

    const filtersEl = document.getElementById("filters");
    const menuEl = document.getElementById("menuList");
    const cartListEl = document.getElementById("cartList");
    const totalTextEl = document.getElementById("totalText");
    const countTextEl = document.getElementById("countText");
    const distinctTextEl = document.getElementById("distinctText");

    // ===== Filters
    function renderFilters(){
      filtersEl.innerHTML = "";
      categories.forEach(cat=>{
        const b = document.createElement("button");
        b.className = "pill" + (cat===activeCat ? " active" : "");
        b.type = "button";
        b.textContent = cat;
        b.addEventListener("click", ()=>{
          activeCat = cat;
          renderFilters();
          renderMenu();
        });
        filtersEl.appendChild(b);
      });
    }

    // ===== Totals
    function getTotal(){
      let total = 0;
      for(const [id, qty] of cart.entries()){
        const it = MENU.find(x=>x.id===id);
        if(it) total += it.price * qty;
      }
      return total;
    }
    function getCount(){
      let count = 0;
      for(const qty of cart.values()) count += qty;
      return count;
    }
    function getDistinct(){ return cart.size; }

    // ===== Menu
    function renderMenu(){
      menuEl.innerHTML = "";
      const list = (activeCat===ALL) ? MENU : MENU.filter(x=>x.cat===activeCat);

      list.forEach(item=>{
        const qty = cart.get(item.id) || 0;

        const row = document.createElement("div");
        row.className = "item";
        row.innerHTML = `
          <div class="itemLeft">
            <p class="itemName" title="${escapeHtml(item.name)}">${escapeHtml(item.name)}</p>
            <div class="itemMeta">
              <span class="tag"><span class="dot"></span>${escapeHtml(item.cat)}</span>
              <span class="tag">Harga: <b style="color:var(--text)">${toIDR(item.price)}</b></span>
            </div>
          </div>

          <div class="itemRight">
            <div class="priceWrap">
              <div class="price">${toIDR(item.price)}</div>
              <div class="priceNote">per item</div>
            </div>

            <div class="qtyWrap">
              <div class="qty">
                <button class="qbtn" type="button" data-act="minus" data-id="${item.id}">‚àí</button>
                <div class="qnum" id="q_${item.id}">${qty}</div>
                <button class="qbtn" type="button" data-act="plus" data-id="${item.id}">+</button>
              </div>
              <div class="qtyNote" id="n_${item.id}">${qty>0 ? "Masuk keranjang ‚úî" : "Tambah ke keranjang"}</div>
            </div>
          </div>
        `;
        menuEl.appendChild(row);
      });
    }

    // ===== Cart
    function renderCart(){
      cartListEl.innerHTML = "";
      const items = Array.from(cart.entries()).map(([id, qty])=>{
        const it = MENU.find(x=>x.id===id);
        return it ? { ...it, qty } : null;
      }).filter(Boolean);

      if(items.length === 0){
        cartListEl.innerHTML = `<div class="cRow"><div><b>Belum ada pesanan</b><small>Pilih menu untuk mulai.</small></div><div class="cRight"><b>‚Äî</b></div></div>`;
      }else{
        items.forEach(it=>{
          const sub = it.price * it.qty;
          const row = document.createElement("div");
          row.className = "cRow";
          row.innerHTML = `
            <div>
              <b>${escapeHtml(it.name)}</b>
              <small>${it.qty} x ${toIDR(it.price)} ‚Ä¢ ${escapeHtml(it.cat)}</small>
            </div>
            <div class="cRight"><b>${toIDR(sub)}</b></div>
          `;
          cartListEl.appendChild(row);
        });
      }

      const total = getTotal();
      totalTextEl.textContent = toIDR(total);
      countTextEl.textContent = String(getCount());
      distinctTextEl.textContent = String(getDistinct());
      document.getElementById("qrisAmountText").textContent = toIDR(total);
    }

    // ===== plus/minus
    menuEl.addEventListener("click", (e)=>{
      const btn = e.target.closest("button[data-act]");
      if(!btn) return;

      const id = btn.dataset.id;
      const act = btn.dataset.act;
      const now = cart.get(id) || 0;

      let next = now;
      if(act === "plus") next = now + 1;
      if(act === "minus") next = Math.max(0, now - 1);

      if(next <= 0) cart.delete(id);
      else cart.set(id, next);

      const q = document.getElementById("q_"+id);
      if(q) q.textContent = String(next);

      const n = document.getElementById("n_"+id);
      if(n) n.textContent = next>0 ? "Masuk keranjang ‚úî" : "Tambah ke keranjang";

      renderCart();
    });

    // ===== Scroll cart
    document.getElementById("scrollCart").addEventListener("click", ()=>{
      document.getElementById("cartPanel").scrollIntoView({behavior:"smooth", block:"start"});
    });

    // ===== QRIS modal
    const modal = document.getElementById("qrisModal");
    const qrisImg = document.getElementById("qrisImg");
    const qrisErr = document.getElementById("qrisErr");
    const closeBtn = document.getElementById("qrisClose");

    function openQRIS(){
      document.getElementById("qrisAmountText").textContent = toIDR(getTotal());
      modal.classList.add("open");
      modal.setAttribute("aria-hidden","false");
    }
    function closeQRIS(){
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden","true");
    }

    closeBtn.addEventListener("click", closeQRIS);
    modal.addEventListener("click", (e)=>{ if(e.target === modal) closeQRIS(); });
    window.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeQRIS(); });

    qrisImg.addEventListener("error", ()=> qrisErr.classList.add("show"));
    qrisImg.addEventListener("load", ()=> qrisErr.classList.remove("show"));

    // ===== Payment toggle (klik card)
    const payMethodEl = document.getElementById("payMethod");
    const payKasir = document.getElementById("payKasir");
    const payQris = document.getElementById("payQris");
    const statKasir = document.getElementById("statKasir");
    const statQris = document.getElementById("statQris");

    function setPay(method){
      payMethodEl.value = method;

      const isKasir = method === "kasir";
      payKasir.classList.toggle("active", isKasir);
      payQris.classList.toggle("active", !isKasir);

      statKasir.textContent = isKasir ? "Dipilih" : "Pilih";
      statQris.textContent  = !isKasir ? "Dipilih" : "Pilih";

      if(isKasir){
        closeQRIS();
        document.getElementById("paidCheck").checked = false;
      }else{
        openQRIS();
      }
    }

    payKasir.addEventListener("click", ()=> setPay("kasir"));
    payQris.addEventListener("click", ()=> setPay("qris"));

    // ===== Reset
    document.getElementById("resetBtn").addEventListener("click", ()=>{
      cart.clear();
      renderMenu();
      renderCart();
      document.getElementById("custName").value = "";
      document.getElementById("custNote").value = "";
      document.getElementById("paidCheck").checked = false;
      setPay("kasir");
    });

    // ===== WhatsApp order
    document.getElementById("orderBtn").addEventListener("click", ()=>{
      const name = document.getElementById("custName").value.trim();
      const note = document.getElementById("custNote").value.trim();
      const total = getTotal();
      const pay = payMethodEl.value;

      const items = Array.from(cart.entries()).map(([id, qty])=>{
        const it = MENU.find(x=>x.id===id);
        if(!it) return null;
        return {name: it.name, qty, price: it.price, sub: it.price*qty};
      }).filter(Boolean);

      if(!name){ alert("Nama wajib diisi."); return; }
      if(items.length === 0){ alert("Pilih minimal 1 menu dulu."); return; }

      if(pay === "qris"){
        const paid = document.getElementById("paidCheck").checked;
        if(!paid){
          alert("Kalau pilih QRIS, centang dulu: ‚ÄúSaya sudah bayar via QRIS‚Äù.");
          return;
        }
      }

      let text = `Halo La Madre Coffee & Roastery, saya ingin order.%0A%0A`;
      text += `Nama: ${encodeURIComponent(name)}%0A`;
      if(note) text += `Catatan: ${encodeURIComponent(note)}%0A`;
      text += `%0A--- Pesanan ---%0A`;

      items.forEach(it=>{
        text += `- ${encodeURIComponent(it.name)} x${it.qty} (${encodeURIComponent(toIDR(it.sub))})%0A`;
      });

      text += `%0AJumlah item: ${encodeURIComponent(String(getCount()))}%0A`;
      text += `Jumlah menu: ${encodeURIComponent(String(getDistinct()))}%0A`;
      text += `Total: ${encodeURIComponent(toIDR(total))}%0A`;
      text += `Metode bayar: ${encodeURIComponent(pay === "qris" ? "QRIS (sudah bayar)" : "Bayar di Kasir")}%0A`;
      text += `%0ATerima kasih.`;

      const WA = "6281398686801";
      window.open(`https://wa.me/${WA}?text=${text}`, "_blank");
    });

    // ===== PDF receipt (print to PDF)
    document.getElementById("pdfBtn").addEventListener("click", ()=>{
      const name = document.getElementById("custName").value.trim();
      const note = document.getElementById("custNote").value.trim();
      const total = getTotal();
      const pay = payMethodEl.value;

      const items = Array.from(cart.entries()).map(([id, qty])=>{
        const it = MENU.find(x=>x.id===id);
        if(!it) return null;
        return {name: it.name, qty, price: it.price, sub: it.price*qty};
      }).filter(Boolean);

      if(!name){ alert("Isi nama dulu sebelum unduh bukti."); return; }
      if(items.length === 0){ alert("Belum ada pesanan."); return; }

      const w = window.open("", "_blank");
      if(!w){ alert("Popup diblokir. Izinkan popup lalu coba lagi."); return; }

      const now = new Date();
      const dt = now.toLocaleString("id-ID");
      const rows = items.map(it=>`
        <tr>
          <td style="padding:8px 0">${escapeHtml(it.name)}<br><small style="color:#666">${it.qty} x ${toIDR(it.price)}</small></td>
          <td style="text-align:right;padding:8px 0;white-space:nowrap">${toIDR(it.sub)}</td>
        </tr>
      `).join("");

      w.document.write(`
        <!doctype html><html><head>
        <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Bukti Pesanan - La Madre</title>
        <style>
          body{font-family:system-ui,Arial;margin:24px;color:#111}
          .box{max-width:520px;margin:0 auto;border:1px solid #ddd;border-radius:16px;padding:18px}
          h1{margin:0;font-size:18px}
          p{margin:6px 0;color:#444;font-size:13px;line-height:1.5}
          table{width:100%;border-collapse:collapse;margin-top:10px}
          .hr{border-top:1px dashed #ddd;margin:12px 0}
          .total{display:flex;justify-content:space-between;align-items:center;font-weight:800;margin-top:10px}
          small{font-size:12px}
          @media print{button{display:none}}
        </style></head><body>
        <div class="box">
          <h1>La Madre Coffee & Roastery</h1>
          <p><b>Bukti Pesanan</b><br>${dt}</p>
          <div class="hr"></div>
          <p><b>Nama:</b> ${escapeHtml(name)}<br>
          ${note ? `<b>Catatan:</b> ${escapeHtml(note)}<br>` : ``}
          <b>Metode:</b> ${pay==="qris" ? "QRIS (semi-manual)" : "Bayar di Kasir"}<br>
          <b>Jumlah item:</b> ${getCount()} ‚Ä¢ <b>Jumlah menu:</b> ${getDistinct()}
          </p>
          <table>${rows}</table>
          <div class="hr"></div>
          <div class="total"><span>Total</span><span>${toIDR(total)}</span></div>
          <p style="margin-top:10px;color:#666">Tunjukkan bukti ini saat diperlukan. Terima kasih üôè</p>
          <button onclick="window.print()" style="margin-top:10px;padding:10px 14px;border-radius:10px;border:1px solid #ddd;background:#f5f5f5;cursor:pointer;font-weight:700">
            Cetak / Simpan sebagai PDF
          </button>
        </div></body></html>
      `);
      w.document.close();
    });

    // ===== Init
    renderFilters();
    renderMenu();
    renderCart();

    // default pay kasir
    // setPay("kasir"); // sudah default active kasir
  </script>
</body>
</html>
