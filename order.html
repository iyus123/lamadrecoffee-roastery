<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Order/Menu ‚Ä¢ La Madre Coffee & Roastery</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0b0c10;
      --bg2:#0f121a;
      --text:#eef2f7;
      --muted:#aab3c2;
      --line:rgba(255,255,255,.10);
      --card:rgba(255,255,255,.06);
      --glass:rgba(0,0,0,.25);
      --accent:#d7b56f;
      --accent2:#7bd7c9;
      --shadow: 0 26px 90px rgba(0,0,0,.50);
      --r:22px;
      --max:1120px;
    }
    [data-theme="light"]{
      --bg:#f6f7fb;
      --bg2:#ffffff;
      --text:#151a24;
      --muted:#5d6778;
      --line:rgba(0,0,0,.10);
      --card:rgba(0,0,0,.04);
      --glass:rgba(255,255,255,.65);
      --shadow: 0 18px 70px rgba(16,20,30,.12);
    }

    *{box-sizing:border-box}
    html,body{
      margin:0;padding:0;
      font-family:"Plus Jakarta Sans",system-ui,Segoe UI,Arial,sans-serif;
      background:linear-gradient(180deg,var(--bg),var(--bg2));
      color:var(--text);
    }
    a{color:inherit;text-decoration:none}

    /* ====== FIX HP: anti geser / overflow ====== */
    html,body{ overflow-x:hidden; max-width:100%; }
    *{ max-width:100%; }

    /* stabilkan viewport mobile (anti loncat address bar) */
    @supports (height: 100dvh){ body{ min-height:100dvh; } }
    @supports not (height: 100dvh){ body{ min-height:100vh; } }

    .wrap{
      width:100%;
      max-width:1120px;
      margin:0 auto;
      padding:0 18px;
    }
    @media (min-width: 1200px){
      .wrap{ max-width:1280px; padding:0 24px; }
    }
    @media (min-width: 1500px){
      .wrap{ max-width:1400px; }
    }

    /* grain halus biar tetap premium */
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.12'/%3E%3C/svg%3E");
      opacity:.06;
      z-index:-1;
    }
    [data-theme="light"] body::before{opacity:.035;}

    /* ===== NAV ===== */
    .nav{
      position:sticky; top:0; z-index:50;
      border-bottom:1px solid var(--line);
      backdrop-filter: blur(12px);
      background:linear-gradient(to bottom, rgba(10,12,18,.82), rgba(10,12,18,.30));
    }
    [data-theme="light"] .nav{
      background:linear-gradient(to bottom, rgba(255,255,255,.88), rgba(255,255,255,.56));
    }
    .navin{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 0}
    .brand{display:flex;gap:12px;align-items:center;min-width:0}
    .logoImg{
      width:46px;height:46px;border-radius:18px;
      object-fit:cover;border:1px solid var(--line);
      box-shadow:0 18px 45px rgba(215,181,111,.18);
      flex:0 0 46px;background:#000;
    }
    .brandTxt{min-width:0}
    .brand h1{
      margin:0;font-size:15px;line-height:1.12;
      letter-spacing:-.02em;font-weight:900;
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      text-transform:uppercase;
    }
    .brand p{
      margin:2px 0 0 0;color:var(--muted);
      font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    }

    .right{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .btn{
      padding:10px 14px;border-radius:14px;
      border:1px solid var(--line);
      background:var(--card);
      color:var(--text);
      font-weight:800;font-size:13px;
      cursor:pointer;
      transition:.18s ease;
      user-select:none;
      display:inline-flex;align-items:center;gap:8px;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0) scale(.98)}
    .btn.primary{
      border-color:rgba(215,181,111,.55);
      background:linear-gradient(135deg, rgba(215,181,111,.98), rgba(123,215,201,.55));
      color:#0b0c10;
      box-shadow:0 16px 40px rgba(215,181,111,.18);
    }

    .desktopOnly{display:flex}
    .hamb{
      display:none;
      width:44px;height:44px;border-radius:16px;
      border:1px solid var(--line);
      background:var(--card);
      color:var(--text);
      cursor:pointer;
      font-weight:900;font-size:18px;
      transition:.18s ease;
    }
    .hamb:hover{transform:translateY(-1px)}
    .hamb:active{transform:translateY(0) scale(.98)}

    .mobileMenu{
      display:none;
      border-top:1px solid var(--line);
      background:linear-gradient(to bottom, rgba(10,12,18,.82), rgba(10,12,18,.50));
      backdrop-filter: blur(12px);
    }
    [data-theme="light"] .mobileMenu{
      background:linear-gradient(to bottom, rgba(255,255,255,.88), rgba(255,255,255,.70));
    }
    .mobileMenu .btn{justify-content:flex-start}
    .mobileMenu .full{
      width:100%;
      border-radius:0;
      border-left:0;border-right:0;border-top:0;
      padding:14px 18px;
    }

    @media (max-width: 720px){
      .brand p{display:none;}
      .desktopOnly{display:none;}
      .hamb{display:inline-flex;align-items:center;justify-content:center;}
      .mobileMenu.open{display:block;}
    }

    /* ===== PAGE ===== */
    .hero{
      position:relative;
      padding:22px 0 12px;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-70px;
      background:
        radial-gradient(900px 520px at 20% 10%, rgba(215,181,111,.16), transparent 60%),
        radial-gradient(900px 520px at 85% 20%, rgba(123,215,201,.12), transparent 60%);
      pointer-events:none;
    }
    .pageTitle{
      margin:0;
      font-size:28px;
      font-weight:900;
      letter-spacing:-.03em;
      line-height:1.05;
    }
    .subtitle{
      margin:8px 0 0 0;
      color:var(--muted);
      line-height:1.7;
      font-size:13.5px;
      max-width:70ch;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      padding:14px 0 120px; /* ruang untuk bottomBar */
      position:relative;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns:1fr; padding-bottom:160px; }
    }

    .panel{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:var(--r);
      padding:14px;
      box-shadow: var(--shadow);
    }
    [data-theme="light"] .panel{box-shadow:0 18px 60px rgba(16,20,30,.09)}

    .secTitle{margin:0 0 10px 0;font-size:15px}
    .muted{color:var(--muted);font-size:12.8px;line-height:1.65;margin:0 0 10px}

    /* menu list */
    .menuGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 720px){
      .menuGrid{grid-template-columns:1fr;}
    }
    .item{
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      border-radius:18px;
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      min-width:0;
    }
    [data-theme="light"] .item{background:rgba(0,0,0,.03)}
    .topRow{display:flex;gap:10px;align-items:flex-start;justify-content:space-between}
    .name{font-weight:900;font-size:13.5px;line-height:1.25}
    .price{font-weight:900;font-size:13px;color:var(--text);white-space:nowrap}
    .desc{color:var(--muted);font-size:12.3px;line-height:1.55}

    .qtyRow{
      display:flex;gap:10px;align-items:center;justify-content:space-between;
      margin-top:auto;
    }
    .qty{
      display:flex;align-items:center;gap:8px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      border-radius:14px;
      padding:8px 10px;
    }
    [data-theme="light"] .qty{background:rgba(0,0,0,.03)}
    .qbtn{
      width:28px;height:28px;border-radius:10px;
      border:1px solid var(--line);
      background:var(--card);
      color:var(--text);
      cursor:pointer;
      font-weight:900;
      display:inline-flex;align-items:center;justify-content:center;
      transition:.18s ease;
    }
    .qbtn:active{transform:scale(.96)}
    .qval{min-width:18px;text-align:center;font-weight:900}

    /* cart */
    .cartList{display:grid;gap:10px;margin-top:8px}
    .cartRow{
      display:flex;align-items:flex-start;justify-content:space-between;gap:10px;
      padding:10px 12px;border-radius:16px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
    }
    [data-theme="light"] .cartRow{background:rgba(0,0,0,.03)}
    .cartRow b{display:block;font-size:13px}
    .cartRow small{color:var(--muted);display:block;margin-top:3px;font-size:12px}
    .cartRight{white-space:nowrap;font-weight:900}

    .totalBox{
      margin-top:12px;
      padding:12px;
      border-radius:18px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.12);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      font-weight:900;
    }
    [data-theme="light"] .totalBox{background:rgba(0,0,0,.03)}
    .totalBox span{color:var(--muted);font-weight:800;font-size:12.8px}

    /* form */
    .form{display:grid;gap:10px;margin-top:12px}
    .input{
      width:100%;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      padding:12px 12px;
      color:var(--text);
      outline:none;
      font-weight:700;
      font-size:16px; /* penting iPhone: anti auto-zoom + anti shift */
    }
    [data-theme="light"] .input{background:rgba(0,0,0,.03)}
    textarea.input{min-height:90px;resize:vertical}

    /* bottom bar */
    .bottomBar{
      position:fixed;
      left:0;right:0;bottom:0;
      z-index:60;
      border-top:1px solid var(--line);
      background:linear-gradient(to top, rgba(10,12,18,.92), rgba(10,12,18,.55));
      backdrop-filter: blur(12px);
      padding:10px 0;
      padding-bottom: calc(10px + env(safe-area-inset-bottom, 0px));
      will-change: transform;
      transition: transform .22s ease;
    }
    [data-theme="light"] .bottomBar{
      background:linear-gradient(to top, rgba(255,255,255,.92), rgba(255,255,255,.70));
    }
    .barIn{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      flex-wrap:wrap;
    }
    .barLeft{
      display:flex;flex-direction:column;gap:2px;
      min-width:0;
    }
    .barLeft b{font-size:14px}
    .barLeft small{color:var(--muted)}
    .barBtns{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .barBtns .btn{white-space:nowrap}

    /* Saat keyboard muncul: sembunyikan bottom bar biar gak goyang */
    body.kbOpen .bottomBar{ transform: translateY(120%); }

    .note{
      margin-top:10px;
      color:var(--muted);
      font-size:12.4px;
      line-height:1.6;
    }
  </style>
</head>

<body>
  <!-- NAV -->
  <div class="nav">
    <div class="wrap navin">
      <div class="brand">
        <img class="logoImg" src="logo-lamadre.png" alt="La Madre Logo">
        <div class="brandTxt">
          <h1>LA MADRE COFFEE &amp; ROASTERY</h1>
          <p>Order/Menu</p>
        </div>
      </div>

      <div class="right desktopOnly">
        <button class="btn" id="themeBtn" type="button">üåì Mode</button>
        <a class="btn" href="index.html">üè† Home</a>
        <a class="btn primary" href="#cart">üßæ Ringkasan</a>
      </div>

      <button class="hamb" id="hambBtn" type="button" aria-label="Buka menu" aria-expanded="false">‚ò∞</button>
    </div>

    <div class="mobileMenu" id="mobileMenu">
      <button class="btn full" id="themeBtnM" type="button">üåì Mode Gelap/Terang</button>
      <a class="btn full" href="index.html">üè† Home</a>
      <a class="btn primary full" href="#cart">üßæ Ringkasan</a>
    </div>
  </div>

  <header class="hero">
    <div class="wrap">
      <h2 class="pageTitle">Order/Menu</h2>
      <p class="subtitle">
        Pilih menu, tentukan jumlah, lalu klik <b>‚ÄúBuat Pesanan‚Äù</b>. Pesanan akan otomatis terkirim ke WhatsApp.
      </p>

      <div class="grid">
        <!-- MENU -->
        <section class="panel">
          <h3 class="secTitle">Menu Pilihan</h3>
          <p class="muted">Klik + / ‚àí untuk menambah/mengurangi pesanan.</p>

          <div class="menuGrid" id="menuGrid"></div>

          <p class="note">
            *Harga & menu bisa kamu edit di bagian <b>const MENU</b> pada script.
          </p>
        </section>

        <!-- CART -->
        <section class="panel" id="cart">
          <h3 class="secTitle">Pesanan Kamu</h3>
          <p class="muted">Ringkasan item yang sudah kamu pilih.</p>

          <div class="cartList" id="cartList"></div>

          <div class="totalBox">
            <span>Total</span>
            <div id="totalText">Rp 0</div>
          </div>

          <div class="form">
            <input class="input" id="custName" type="text" placeholder="Nama pemesan (wajib)" />
            <textarea class="input" id="custNote" placeholder="Catatan (opsional)"></textarea>
          </div>

          <p class="note">
            Setelah klik ‚ÄúBuat Pesanan‚Äù, WhatsApp akan terbuka dengan detail item + jumlah + total.
          </p>
        </section>
      </div>
    </div>
  </header>

  <div class="bottomBar" id="bottomBar">
    <div class="wrap barIn">
      <div class="barLeft">
        <b id="barTotal">Total: Rp 0</b>
        <small id="barCount">0 item dipilih</small>
      </div>

      <div class="barBtns">
        <button class="btn" id="resetBtn" type="button">‚Ü∫ Reset</button>
        <a class="btn" href="index.html">‚Üê Kembali</a>
        <button class="btn primary" id="orderBtn" type="button">üì© Buat Pesanan</button>
      </div>
    </div>
  </div>

  <script>
    // ===== Mobile Menu Toggle
    (function(){
      const hambBtn = document.getElementById("hambBtn");
      const mobileMenu = document.getElementById("mobileMenu");
      if(!hambBtn || !mobileMenu) return;

      hambBtn.addEventListener("click", ()=>{
        const open = mobileMenu.classList.toggle("open");
        hambBtn.setAttribute("aria-expanded", open ? "true" : "false");
        hambBtn.textContent = open ? "‚úï" : "‚ò∞";
      });

      mobileMenu.addEventListener("click", (e)=>{
        if(e.target.tagName === "A"){
          mobileMenu.classList.remove("open");
          hambBtn.setAttribute("aria-expanded","false");
          hambBtn.textContent = "‚ò∞";
        }
      });
    })();

    // ===== Theme (same key as index) sync Desktop & Mobile
    (function(){
      const key = "theme_lamadre";
      const btnD = document.getElementById("themeBtn");
      const btnM = document.getElementById("themeBtnM");

      function applySaved(){
        const saved = localStorage.getItem(key);
        if(saved === "light") document.documentElement.setAttribute("data-theme","light");
        else document.documentElement.removeAttribute("data-theme");
      }
      function toggle(){
        const isLight = document.documentElement.getAttribute("data-theme")==="light";
        if(isLight){
          document.documentElement.removeAttribute("data-theme");
          localStorage.setItem(key,"dark");
        }else{
          document.documentElement.setAttribute("data-theme","light");
          localStorage.setItem(key,"light");
        }
      }
      applySaved();
      if(btnD) btnD.addEventListener("click", toggle);
      if(btnM) btnM.addEventListener("click", toggle);
    })();

    // ===== MENU DATA (edit di sini)
    const MENU = [
      { id:"espresso", name:"Espresso", price:20000, desc:"Single shot, bold & clean." },
      { id:"americano", name:"Americano", price:25000, desc:"Long black, light & smooth." },
      { id:"cafelatte", name:"Cafe Latte", price:32000, desc:"Creamy milk & espresso." },
      { id:"butterscotch", name:"Butterscotch Latte", price:36000, desc:"Sweet, creamy, crowd favorite." },
      { id:"matcha", name:"Matcha Latte", price:32000, desc:"Earthy, creamy matcha." },
      { id:"fries", name:"French Fries", price:25000, desc:"Crispy fries, perfect snack." },
      { id:"toast", name:"Bread Toast", price:28000, desc:"Toasted bread with topping." },
      { id:"grilledchicken", name:"Grilled Chicken Rice", price:45000, desc:"Comfort food for lunch/dinner." },
    ];

    // ===== Helpers
    const rupiah = (n)=> "Rp " + (n||0).toLocaleString("id-ID");
    const WA_NUMBER = "6281398686801";

    // ===== State
    const cart = new Map(); // id -> qty

    // ===== Render Menu
    const menuGrid = document.getElementById("menuGrid");
    const cartList = document.getElementById("cartList");
    const totalText = document.getElementById("totalText");
    const barTotal = document.getElementById("barTotal");
    const barCount = document.getElementById("barCount");

    function renderMenu(){
      menuGrid.innerHTML = "";
      MENU.forEach(m=>{
        const qty = cart.get(m.id) || 0;

        const el = document.createElement("div");
        el.className = "item";
        el.innerHTML = `
          <div class="topRow">
            <div style="min-width:0">
              <div class="name">${m.name}</div>
              <div class="desc">${m.desc || ""}</div>
            </div>
            <div class="price">${rupiah(m.price)}</div>
          </div>

          <div class="qtyRow">
            <div class="qty">
              <button class="qbtn" data-act="minus" data-id="${m.id}" type="button">‚àí</button>
              <div class="qval" id="q_${m.id}">${qty}</div>
              <button class="qbtn" data-act="plus" data-id="${m.id}" type="button">+</button>
            </div>
            <button class="btn" data-act="add" data-id="${m.id}" type="button">Tambah</button>
          </div>
        `;
        menuGrid.appendChild(el);
      });
    }

    function renderCart(){
      const items = [];
      let total = 0;
      let count = 0;

      cartList.innerHTML = "";

      MENU.forEach(m=>{
        const qty = cart.get(m.id) || 0;
        if(qty <= 0) return;
        const sub = qty * m.price;

        items.push({name:m.name, qty, price:m.price, sub});
        total += sub;
        count += qty;

        const row = document.createElement("div");
        row.className = "cartRow";
        row.innerHTML = `
          <div>
            <b>${m.name} <small>x${qty}</small></b>
            <small>${rupiah(m.price)} / item</small>
          </div>
          <div class="cartRight">${rupiah(sub)}</div>
        `;
        cartList.appendChild(row);
      });

      if(items.length === 0){
        const empty = document.createElement("div");
        empty.className = "muted";
        empty.textContent = "Belum ada pesanan. Silakan pilih menu di sebelah kiri.";
        cartList.appendChild(empty);
      }

      totalText.textContent = rupiah(total);
      barTotal.textContent = "Total: " + rupiah(total);
      barCount.textContent = `${count} item dipilih`;

      // update qty labels
      MENU.forEach(m=>{
        const q = cart.get(m.id) || 0;
        const qEl = document.getElementById("q_"+m.id);
        if(qEl) qEl.textContent = q;
      });

      return {items, total, count};
    }

    function setQty(id, nextQty){
      const qty = Math.max(0, nextQty);
      if(qty === 0) cart.delete(id);
      else cart.set(id, qty);
      renderCart();
    }

    // ===== Click handlers
    menuGrid.addEventListener("click", (e)=>{
      const btn = e.target.closest("[data-act]");
      if(!btn) return;
      const act = btn.getAttribute("data-act");
      const id = btn.getAttribute("data-id");
      const current = cart.get(id) || 0;

      if(act === "plus") setQty(id, current + 1);
      if(act === "minus") setQty(id, current - 1);
      if(act === "add") setQty(id, current + 1);
    });

    document.getElementById("resetBtn").addEventListener("click", ()=>{
      cart.clear();
      renderMenu();
      renderCart();
      document.getElementById("custName").value = "";
      document.getElementById("custNote").value = "";
    });

    // ===== WA order message
    document.getElementById("orderBtn").addEventListener("click", ()=>{
      const name = document.getElementById("custName").value.trim();
      const note = document.getElementById("custNote").value.trim();

      const {items, total, count} = renderCart();

      if(!name){
        alert("Nama pemesan wajib diisi ya üôÇ");
        document.getElementById("custName").focus();
        return;
      }
      if(count === 0){
        alert("Pesanan masih kosong. Silakan pilih menu dulu üôÇ");
        return;
      }

      let msg = `Halo La Madre Coffee & Roastery,%0A%0ASaya ingin order:%0A`;
      items.forEach((it, idx)=>{
        msg += `${idx+1}. ${it.name} x${it.qty} (${rupiah(it.sub)})%0A`;
      });
      msg += `%0A*Total:* ${rupiah(total)}%0A`;
      msg += `*Nama:* ${name}%0A`;
      if(note) msg += `*Catatan:* ${note}%0A`;
      msg += `%0ATerima kasih üôè`;

      const url = `https://wa.me/${WA_NUMBER}?text=${msg}`;
      window.open(url, "_blank", "noopener,noreferrer");
    });

    // ===== Render first
    renderMenu();
    renderCart();

    // ===== Keyboard fix: saat fokus input, sembunyikan bottom bar (anti goyang)
    (function(){
      const inputs = document.querySelectorAll("input, textarea, select");
      inputs.forEach(el=>{
        el.addEventListener("focus", ()=> document.body.classList.add("kbOpen"));
        el.addEventListener("blur",  ()=> document.body.classList.remove("kbOpen"));
      });
    })();
  </script>
</body>
</html>
